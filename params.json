{"note":"Don't delete this file! It's used internally to help with page regeneration.","body":"# theblitz Project #\r\nAn attempt to map the bombs of the blitz over London.\r\nThe idea is to learn to use d3.js and have a video-like effect as in\r\nthe [the wealth of nations example][TWoN].\r\n(Or make a stop motion video out of it...)\r\n\r\n# The Data #\r\nThe nice article and datablog entry of The Guardian --\r\n['London Blitz 1940: the first day's bomb attacks listed in full'][the first day of the London Blitz]\r\nprovides access to the historical records of the first air raid over London in 1940.\r\nIt is a spreadsheet listing for 843 drops, the time, the address, the type of\r\nbomb and the damage caused.\r\nThe times are for 7th Sep 1940.\r\nI converted it to CSV - with ';' as separator - and stored the result\r\nin this project.\r\n\r\n## Obtaining lat/lon for the drops ##\r\nI tried various approaches to geocode the addresses in the data set:\r\n* using [nominatim-python][], a python library for [Nominatim][].\r\n\r\n### Geocoding via Nominatim ###\r\nThe lookup of the 73rd entry in [the data][] file, \r\n\r\n> Royal Arsenal, Woolwich, SE18, London, UK\r\n\r\ngives\r\n\r\n```python\r\n>>> import nominatim\r\n>>> import json\r\n>>> address_lookup=nominatim.Geocoder().geocode('Royal Arsenal, Woolwich, SE18, London, UK')\r\n>>> print json.dumps(address_lookup)\r\n[\r\n    {\r\n        \"display_name\": \"Royal Arsenal Woolwich Pier, Woolwich, London Borough of Greenwich, Greater London, London, England, SE18, United Kingdom\", \r\n        \"place_id\": \"2112469544\", \r\n        \"lon\": \"0.070824870400824\", \r\n        \"lat\": \"51.4956072184614\", \r\n        \"osm_type\": \"way\", \r\n        \"licence\": \"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.\", \r\n        \"osm_id\": \"103128361\", \r\n        \"boundingbox\": [\r\n            \"51.4951553344727\", \r\n            \"51.495906829834\", \r\n            \"0.0705746933817863\", \r\n            \"0.0711841061711311\"\r\n        ], \r\n        \"type\": \"pedestrian\", \r\n        \"class\": \"highway\", \r\n        \"address\": {\r\n            \"city\": \"London Borough of Greenwich\", \r\n            \"state_district\": \"London\", \r\n            \"suburb\": \"Woolwich\", \r\n            \"country\": \"United Kingdom\", \r\n            \"county\": \"Greater London\", \r\n            \"pedestrian\": \"Royal Arsenal Woolwich Pier\", \r\n            \"state\": \"England\", \r\n            \"postcode\": \"SE18\", \r\n            \"country_code\": \"gb\"\r\n        }\r\n    }\r\n]\r\n```\r\n\r\n### Geocoding via Google Maps v3 ###\r\nIt turns out that a lot of addresses are not geocoded by Nominatim,\r\nfor example entry 225 \r\n> 128 Aylward Street, Stepney E1, London, UK\r\n\r\nSo I tried Google Maps v3 using [pygeocoder][] library:\r\n```python\r\n>>> import pygeocoder as geo\r\n>>> import json\r\n>>> drop = '128 Aylward Street, Stepney E1, London, UK'\r\n>>> gm_lookup = pygeocoder.Geocoder.geocode(drop)\r\n>>> print json.dumps(gm_lookup.raw, indent=4)\r\n[\r\n    {\r\n        \"geometry\": {\r\n            \"location\": {\r\n                \"lat\": 51.5159781, \r\n                \"lng\": -0.0462063\r\n            }, \r\n            \"viewport\": {\r\n                \"northeast\": {\r\n                    \"lat\": 51.5173270802915, \r\n                    \"lng\": -0.04485731970849797\r\n                }, \r\n                \"southwest\": {\r\n                    \"lat\": 51.5146291197085, \r\n                    \"lng\": -0.04755528029150203\r\n                }\r\n            }, \r\n            \"location_type\": \"ROOFTOP\"\r\n        }, \r\n        \"address_components\": [\r\n            {\r\n                \"long_name\": \"128\", \r\n                \"types\": [\r\n                    \"street_number\"\r\n                ], \r\n                \"short_name\": \"128\"\r\n            }, \r\n            {\r\n                \"long_name\": \"Aylward St\", \r\n                \"types\": [\r\n                    \"route\"\r\n                ], \r\n                \"short_name\": \"Aylward St\"\r\n            }, \r\n            {\r\n                \"long_name\": \"London\", \r\n                \"types\": [\r\n                    \"locality\", \r\n                    \"political\"\r\n                ], \r\n                \"short_name\": \"London\"\r\n            }, \r\n            {\r\n                \"long_name\": \"Greater London\", \r\n                \"types\": [\r\n                    \"administrative_area_level_2\", \r\n                    \"political\"\r\n                ], \r\n                \"short_name\": \"Gt Lon\"\r\n            }, \r\n            {\r\n                \"long_name\": \"United Kingdom\", \r\n                \"types\": [\r\n                    \"country\", \r\n                    \"political\"\r\n                ], \r\n                \"short_name\": \"GB\"\r\n            }, \r\n            {\r\n                \"long_name\": \"E1 0QW\", \r\n                \"types\": [\r\n                    \"postal_code\"\r\n                ], \r\n                \"short_name\": \"E1 0QW\"\r\n            }, \r\n            {\r\n                \"long_name\": \"London\", \r\n                \"types\": [\r\n                    \"postal_town\"\r\n                ], \r\n                \"short_name\": \"London\"\r\n            }\r\n        ], \r\n        \"partial_match\": true, \r\n        \"formatted_address\": \"128 Aylward St, London, Greater London E1 0QW, UK\", \r\n        \"types\": [\r\n            \"street_address\"\r\n        ]\r\n    }\r\n]\r\n```\r\n\r\nBut even Google Maps fails, for example on entry 224\r\n> 12 Jewel Street, Stepney E1, London, UK\r\nThis street probably does not exist any more.\r\n\r\nFile addressesNotFound.txt lists the addresses I could not geocode automagically. \r\nI did spot some of them using scanned maps of London from [1908][London1908] and\r\n[1940][London1940] or guessed.\r\n\r\n\r\n# Timeline #\r\n========\r\nI would like to use [d3.js][d3js] like in\r\n[the wealth of nations][TWoN] example, i.e. with an animation.\r\nThe raid started after 16:14 when the German bombers entered British airspace.\r\nSo the times from in the Guardian spreadsheet need to be date stamped.\r\n\r\n\r\n\r\n[the first day of the London Blitz]:\r\nhttp://www.guardian.co.uk/news/datablog/2010/sep/06/london-blitz-bomb-map-september-7-1940\r\n\"The first day of the London Blitz\"\r\n\r\n[nominatim]: http://wiki.openstreetmap.org/wiki/Nominatim\r\n\"nominatim reverse geocoding\"\r\n\r\n[nominatim-python]:\r\nhttps://github.com/agabel/python-nominatim\r\n\"nominatim \"\r\n\r\n[the data]:\r\n<https://docs.google.com/spreadsheet/ccc?key=0AonYZs4MzlZbdGZyNDJtd0d0ZFhvRTBxOFAyMkRFeUE&hl=en#gid=0>\r\n\"the spreadsheet for the bombs of first day of London Blitz\"\r\n\r\n[pygeocoder]:\r\nhttp://code.xster.net/pygeocoder\r\n\"pygeocoder\"\r\n\r\n[d3js]:\r\nhttp://d3js.org/\r\n\"Data-Driven Documents javascript library\"\r\n\r\n[TWoN]:\r\nhttp://bost.ocks.org/mike/nations/\r\n\"The Wealth of Nations \"\r\n\r\n[London1940]:\r\nhttp://www.maps-of-london.com/\r\n\"London map ca. 1940\"\r\n\r\n[London1908]:\r\nhttp://mapco.net/bart1908/bart38b.htm\r\n\"London map ca. 1908\"\r\n","name":"Theblitz","tagline":"An attempt to map the bombs of the blitz over london","google":""}